{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { EventEmitter, Directive, Input, Output, NgModule } from '@angular/core';\nimport { interval, ReplaySubject } from 'rxjs';\nimport { takeUntil, filter, tap } from 'rxjs/operators';\n\nconst getDateNow = () => {\n  return Math.floor(Date.now() / 1000);\n};\n\nconst getCountdownResult = secondes => {\n  return {\n    seconds: Math.floor(secondes / 1 % 60),\n    minutes: Math.floor(secondes / 1 / 60 % 60),\n    hours: Math.floor(secondes / (1 * 60 * 60) % 24),\n    day: Math.floor(secondes / (1 * 60 * 60 * 24))\n  };\n};\n\nconst getLanguage = language => {\n  if (language === 'fr') {\n    return {\n      timeago: 'il y a',\n      now: \"à l'instant\",\n      seconds: 's',\n      minutes: 'm',\n      hours: 'h',\n      day: 'j'\n    };\n  } else if (language === 'de') {\n    return {\n      timeago: 'vor',\n      now: 'gerade jetzt',\n      seconds: 'z',\n      minutes: 'm',\n      hours: 's',\n      day: 't'\n    };\n  } else if (language === 'pt') {\n    return {\n      timeago: 'há',\n      now: 'agora mesmo',\n      seconds: 's',\n      minutes: 'm',\n      hours: 's',\n      day: 'd'\n    };\n  } else if (language === 'es') {\n    return {\n      timeago: 'hace',\n      now: 'en este momento',\n      seconds: 's',\n      minutes: 'm',\n      hours: 's',\n      day: 'd'\n    };\n  } else if (language === 'cs') {\n    return {\n      timeago: 'před',\n      now: 'právě teď',\n      seconds: 's',\n      minutes: 'm',\n      hours: 'h',\n      day: 'd'\n    };\n  } else if (language === 'pl') {\n    return {\n      timeago: 'jest',\n      now: 'właśnie',\n      seconds: 's',\n      minutes: 'm',\n      hours: 'g',\n      day: 'd'\n    };\n  } else if (language === 'ge') {\n    return {\n      timeago: 'დასრულდა',\n      now: 'დროა',\n      seconds: 'წმ',\n      minutes: 'წთ',\n      hours: 'სთ',\n      day: 'დღე'\n    };\n  } else {\n    return {\n      timeago: 'there is',\n      now: 'just now',\n      seconds: 's',\n      minutes: 'm',\n      hours: 'h',\n      day: 'd'\n    };\n  }\n};\n\nclass NgxSimpleCountdownDirective {\n  constructor(elementRef) {\n    this.elementRef = elementRef;\n    this.endMessage = 'countdown finish';\n    this.language = 'en';\n    this.reactive = true;\n    this.styles = 'font-size:20px;color:#FFF;background-color:#000;padding:10px 5px;font-weight:bold;min-width:40px;text-align:center;';\n    this.finish = new EventEmitter();\n  }\n\n  ngOnInit() {\n    this.dateNow = getDateNow();\n    this.keywords = getLanguage(this.language);\n    this.initSimpleCountdown();\n  }\n\n  ngOnDestroy() {}\n\n  initSimpleCountdown() {\n    this.totalSecondes = this.dateTo - this.dateNow;\n    this.updateSimpleCountdown(this.totalSecondes);\n    this.interval$ = interval(1000).pipe(takeUntil(this.componentDestroyed(this)), filter(_ => this.reactive && this.totalSecondes > 0), tap(_ => {\n      this.totalSecondes--;\n      this.updateSimpleCountdown(this.totalSecondes);\n    }));\n\n    if (this.reactive) {\n      this.interval$.subscribe();\n    }\n  }\n\n  createHTML(data) {\n    const {\n      day,\n      hours,\n      minutes,\n      seconds\n    } = data;\n    let o = '';\n\n    if (this.totalSecondes > 0) {\n      o = '<div style=\"display:flex;\">';\n\n      if (day > 0) {\n        o += `<div style=\"${this.styles}\">\n          ${day}${this.keywords.day}\n          </div>`;\n      }\n\n      if (hours > 0 || day > 0) {\n        o += `<div style=\"${this.styles}\">\n          ${hours}${this.keywords.hours}\n        </div>`;\n      }\n\n      if ((minutes > 0 || hours > 0 || day > 0) && this.reactive) {\n        o += `<div style=\"${this.styles}\">\n          ${minutes}${this.keywords.minutes}\n        </div>`;\n      }\n\n      if ((seconds > 0 || minutes > 0 || hours > 0 || day > 0) && this.reactive) {\n        o += `<div style=\"${this.styles}\">\n          ${seconds}${this.keywords.seconds}\n        </div>`;\n      }\n\n      o += '</div>';\n    } else {\n      this.finish.emit();\n\n      if (this.endMessage !== '') {\n        o += `<div style=\"${this.styles}\">${this.endMessage}</div>`;\n      }\n    }\n\n    this.elementRef.nativeElement.innerHTML = o;\n  }\n\n  updateSimpleCountdown(secondes) {\n    const countdownResult = getCountdownResult(secondes);\n    this.createHTML(countdownResult);\n  }\n\n  componentDestroyed(component) {\n    const oldNgOnDestroy = component.ngOnDestroy;\n    const destroyed$ = new ReplaySubject(1);\n\n    component.ngOnDestroy = () => {\n      oldNgOnDestroy.apply(component);\n      destroyed$.next(undefined);\n      destroyed$.complete();\n    };\n\n    return destroyed$;\n  }\n\n}\n\nNgxSimpleCountdownDirective.ɵfac = function NgxSimpleCountdownDirective_Factory(t) {\n  return new (t || NgxSimpleCountdownDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nNgxSimpleCountdownDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NgxSimpleCountdownDirective,\n  selectors: [[\"\", \"simpleCountdown\", \"\"]],\n  inputs: {\n    dateTo: \"dateTo\",\n    endMessage: \"endMessage\",\n    language: \"language\",\n    reactive: \"reactive\",\n    styles: \"styles\"\n  },\n  outputs: {\n    finish: \"finish\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxSimpleCountdownDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[simpleCountdown]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }];\n  }, {\n    dateTo: [{\n      type: Input\n    }],\n    endMessage: [{\n      type: Input\n    }],\n    language: [{\n      type: Input\n    }],\n    reactive: [{\n      type: Input\n    }],\n    styles: [{\n      type: Input\n    }],\n    finish: [{\n      type: Output\n    }]\n  });\n})();\n\nclass NgxSimpleTimeagoDirective {\n  constructor(elementRef) {\n    this.elementRef = elementRef;\n    this.language = 'en';\n    this.reactive = true;\n  }\n\n  ngOnInit() {\n    this.dateNow = getDateNow();\n    this.keywords = getLanguage(this.language);\n    this.initSimpleCountdown();\n  }\n\n  ngOnDestroy() {}\n\n  initSimpleCountdown() {\n    this.totalSecondes = this.dateNow - this.date;\n    this.updateSimpleCountdown(this.totalSecondes);\n    this.interval$ = interval(20000).pipe(takeUntil(this.componentDestroyed(this)), filter(() => this.reactive && this.totalSecondes > 0), tap(() => {\n      this.totalSecondes += 20;\n      this.updateSimpleCountdown(this.totalSecondes);\n    }));\n\n    if (this.reactive) {\n      this.interval$.subscribe();\n    }\n  }\n\n  createHTML(data) {\n    const {\n      day,\n      hours,\n      minutes\n    } = data;\n    let o = '';\n\n    if (this.totalSecondes > 0) {\n      if (this.totalSecondes <= 60) {\n        o += this.keywords.now;\n      } else {\n        o += `${this.keywords.timeago} `;\n\n        if (data.day > 0) {\n          o += `${data.day}${this.keywords.day} `;\n        }\n\n        if (hours > 0 || day > 0) {\n          o += `${hours}${this.keywords.hours} `;\n        }\n\n        if (minutes > 0 || hours > 0 || day > 0) {\n          o += `${minutes}${this.keywords.minutes} `;\n        }\n      }\n    }\n\n    this.elementRef.nativeElement.innerHTML = o;\n  }\n\n  updateSimpleCountdown(secondes) {\n    const countdownResult = getCountdownResult(secondes);\n    this.createHTML(countdownResult);\n  }\n\n  componentDestroyed(component) {\n    const oldNgOnDestroy = component.ngOnDestroy;\n    const destroyed$ = new ReplaySubject(1);\n\n    component.ngOnDestroy = () => {\n      oldNgOnDestroy.apply(component);\n      destroyed$.next(undefined);\n      destroyed$.complete();\n    };\n\n    return destroyed$;\n  }\n\n}\n\nNgxSimpleTimeagoDirective.ɵfac = function NgxSimpleTimeagoDirective_Factory(t) {\n  return new (t || NgxSimpleTimeagoDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nNgxSimpleTimeagoDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n  type: NgxSimpleTimeagoDirective,\n  selectors: [[\"\", \"simpleTimeago\", \"\"]],\n  inputs: {\n    date: \"date\",\n    language: \"language\",\n    reactive: \"reactive\"\n  }\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxSimpleTimeagoDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[simpleTimeago]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }];\n  }, {\n    date: [{\n      type: Input\n    }],\n    language: [{\n      type: Input\n    }],\n    reactive: [{\n      type: Input\n    }]\n  });\n})();\n\nclass NgxSimpleCountdownModule {}\n\nNgxSimpleCountdownModule.ɵfac = function NgxSimpleCountdownModule_Factory(t) {\n  return new (t || NgxSimpleCountdownModule)();\n};\n\nNgxSimpleCountdownModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxSimpleCountdownModule\n});\nNgxSimpleCountdownModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxSimpleCountdownModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective],\n      imports: [],\n      exports: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective]\n    }]\n  }], null, null);\n})();\n/*\n * Public API Surface of ngx-simple-countdown\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NgxSimpleCountdownDirective, NgxSimpleCountdownModule, NgxSimpleTimeagoDirective };","map":{"version":3,"sources":["/Applications/MAMP/htdocs/npm/npm-directives/dist/ngx-simple-countdown/fesm2015/ngx-simple-countdown.mjs"],"names":["i0","EventEmitter","Directive","Input","Output","NgModule","interval","ReplaySubject","takeUntil","filter","tap","getDateNow","Math","floor","Date","now","getCountdownResult","secondes","seconds","minutes","hours","day","getLanguage","language","timeago","NgxSimpleCountdownDirective","constructor","elementRef","endMessage","reactive","styles","finish","ngOnInit","dateNow","keywords","initSimpleCountdown","ngOnDestroy","totalSecondes","dateTo","updateSimpleCountdown","interval$","pipe","componentDestroyed","_","subscribe","createHTML","data","o","emit","nativeElement","innerHTML","countdownResult","component","oldNgOnDestroy","destroyed$","apply","next","undefined","complete","ɵfac","ElementRef","ɵdir","type","args","selector","NgxSimpleTimeagoDirective","date","NgxSimpleCountdownModule","ɵmod","ɵinj","declarations","imports","exports"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { EventEmitter, Directive, Input, Output, NgModule } from '@angular/core';\nimport { interval, ReplaySubject } from 'rxjs';\nimport { takeUntil, filter, tap } from 'rxjs/operators';\n\nconst getDateNow = () => {\n    return Math.floor(Date.now() / 1000);\n};\nconst getCountdownResult = (secondes) => {\n    return {\n        seconds: Math.floor((secondes / 1) % 60),\n        minutes: Math.floor((secondes / 1 / 60) % 60),\n        hours: Math.floor((secondes / (1 * 60 * 60)) % 24),\n        day: Math.floor(secondes / (1 * 60 * 60 * 24))\n    };\n};\nconst getLanguage = (language) => {\n    if (language === 'fr') {\n        return {\n            timeago: 'il y a',\n            now: \"à l'instant\",\n            seconds: 's',\n            minutes: 'm',\n            hours: 'h',\n            day: 'j'\n        };\n    }\n    else if (language === 'de') {\n        return {\n            timeago: 'vor',\n            now: 'gerade jetzt',\n            seconds: 'z',\n            minutes: 'm',\n            hours: 's',\n            day: 't'\n        };\n    }\n    else if (language === 'pt') {\n        return {\n            timeago: 'há',\n            now: 'agora mesmo',\n            seconds: 's',\n            minutes: 'm',\n            hours: 's',\n            day: 'd'\n        };\n    }\n    else if (language === 'es') {\n        return {\n            timeago: 'hace',\n            now: 'en este momento',\n            seconds: 's',\n            minutes: 'm',\n            hours: 's',\n            day: 'd'\n        };\n    }\n    else if (language === 'cs') {\n        return {\n            timeago: 'před',\n            now: 'právě teď',\n            seconds: 's',\n            minutes: 'm',\n            hours: 'h',\n            day: 'd'\n        };\n    }\n    else if (language === 'pl') {\n        return {\n            timeago: 'jest',\n            now: 'właśnie',\n            seconds: 's',\n            minutes: 'm',\n            hours: 'g',\n            day: 'd'\n        };\n    }\n    else if (language === 'ge') {\n        return {\n            timeago: 'დასრულდა',\n            now: 'დროა',\n            seconds: 'წმ',\n            minutes: 'წთ',\n            hours: 'სთ',\n            day: 'დღე'\n        };\n    }\n    else {\n        return {\n            timeago: 'there is',\n            now: 'just now',\n            seconds: 's',\n            minutes: 'm',\n            hours: 'h',\n            day: 'd'\n        };\n    }\n};\n\nclass NgxSimpleCountdownDirective {\n    constructor(elementRef) {\n        this.elementRef = elementRef;\n        this.endMessage = 'countdown finish';\n        this.language = 'en';\n        this.reactive = true;\n        this.styles = 'font-size:20px;color:#FFF;background-color:#000;padding:10px 5px;font-weight:bold;min-width:40px;text-align:center;';\n        this.finish = new EventEmitter();\n    }\n    ngOnInit() {\n        this.dateNow = getDateNow();\n        this.keywords = getLanguage(this.language);\n        this.initSimpleCountdown();\n    }\n    ngOnDestroy() { }\n    initSimpleCountdown() {\n        this.totalSecondes = this.dateTo - this.dateNow;\n        this.updateSimpleCountdown(this.totalSecondes);\n        this.interval$ = interval(1000).pipe(takeUntil(this.componentDestroyed(this)), filter((_) => this.reactive && this.totalSecondes > 0), tap((_) => {\n            this.totalSecondes--;\n            this.updateSimpleCountdown(this.totalSecondes);\n        }));\n        if (this.reactive) {\n            this.interval$.subscribe();\n        }\n    }\n    createHTML(data) {\n        const { day, hours, minutes, seconds } = data;\n        let o = '';\n        if (this.totalSecondes > 0) {\n            o = '<div style=\"display:flex;\">';\n            if (day > 0) {\n                o += `<div style=\"${this.styles}\">\n          ${day}${this.keywords.day}\n          </div>`;\n            }\n            if (hours > 0 || day > 0) {\n                o += `<div style=\"${this.styles}\">\n          ${hours}${this.keywords.hours}\n        </div>`;\n            }\n            if ((minutes > 0 || hours > 0 || day > 0) && this.reactive) {\n                o += `<div style=\"${this.styles}\">\n          ${minutes}${this.keywords.minutes}\n        </div>`;\n            }\n            if ((seconds > 0 || minutes > 0 || hours > 0 || day > 0) &&\n                this.reactive) {\n                o += `<div style=\"${this.styles}\">\n          ${seconds}${this.keywords.seconds}\n        </div>`;\n            }\n            o += '</div>';\n        }\n        else {\n            this.finish.emit();\n            if (this.endMessage !== '') {\n                o += `<div style=\"${this.styles}\">${this.endMessage}</div>`;\n            }\n        }\n        this.elementRef.nativeElement.innerHTML = o;\n    }\n    updateSimpleCountdown(secondes) {\n        const countdownResult = getCountdownResult(secondes);\n        this.createHTML(countdownResult);\n    }\n    componentDestroyed(component) {\n        const oldNgOnDestroy = component.ngOnDestroy;\n        const destroyed$ = new ReplaySubject(1);\n        component.ngOnDestroy = () => {\n            oldNgOnDestroy.apply(component);\n            destroyed$.next(undefined);\n            destroyed$.complete();\n        };\n        return destroyed$;\n    }\n}\nNgxSimpleCountdownDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownDirective, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nNgxSimpleCountdownDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.9\", type: NgxSimpleCountdownDirective, selector: \"[simpleCountdown]\", inputs: { dateTo: \"dateTo\", endMessage: \"endMessage\", language: \"language\", reactive: \"reactive\", styles: \"styles\" }, outputs: { finish: \"finish\" }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[simpleCountdown]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { dateTo: [{\n                type: Input\n            }], endMessage: [{\n                type: Input\n            }], language: [{\n                type: Input\n            }], reactive: [{\n                type: Input\n            }], styles: [{\n                type: Input\n            }], finish: [{\n                type: Output\n            }] } });\n\nclass NgxSimpleTimeagoDirective {\n    constructor(elementRef) {\n        this.elementRef = elementRef;\n        this.language = 'en';\n        this.reactive = true;\n    }\n    ngOnInit() {\n        this.dateNow = getDateNow();\n        this.keywords = getLanguage(this.language);\n        this.initSimpleCountdown();\n    }\n    ngOnDestroy() { }\n    initSimpleCountdown() {\n        this.totalSecondes = this.dateNow - this.date;\n        this.updateSimpleCountdown(this.totalSecondes);\n        this.interval$ = interval(20000).pipe(takeUntil(this.componentDestroyed(this)), filter(() => this.reactive && this.totalSecondes > 0), tap(() => {\n            this.totalSecondes += 20;\n            this.updateSimpleCountdown(this.totalSecondes);\n        }));\n        if (this.reactive) {\n            this.interval$.subscribe();\n        }\n    }\n    createHTML(data) {\n        const { day, hours, minutes } = data;\n        let o = '';\n        if (this.totalSecondes > 0) {\n            if (this.totalSecondes <= 60) {\n                o += this.keywords.now;\n            }\n            else {\n                o += `${this.keywords.timeago} `;\n                if (data.day > 0) {\n                    o += `${data.day}${this.keywords.day} `;\n                }\n                if (hours > 0 || day > 0) {\n                    o += `${hours}${this.keywords.hours} `;\n                }\n                if (minutes > 0 || hours > 0 || day > 0) {\n                    o += `${minutes}${this.keywords.minutes} `;\n                }\n            }\n        }\n        this.elementRef.nativeElement.innerHTML = o;\n    }\n    updateSimpleCountdown(secondes) {\n        const countdownResult = getCountdownResult(secondes);\n        this.createHTML(countdownResult);\n    }\n    componentDestroyed(component) {\n        const oldNgOnDestroy = component.ngOnDestroy;\n        const destroyed$ = new ReplaySubject(1);\n        component.ngOnDestroy = () => {\n            oldNgOnDestroy.apply(component);\n            destroyed$.next(undefined);\n            destroyed$.complete();\n        };\n        return destroyed$;\n    }\n}\nNgxSimpleTimeagoDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleTimeagoDirective, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\nNgxSimpleTimeagoDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"12.0.0\", version: \"13.3.9\", type: NgxSimpleTimeagoDirective, selector: \"[simpleTimeago]\", inputs: { date: \"date\", language: \"language\", reactive: \"reactive\" }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleTimeagoDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[simpleTimeago]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { date: [{\n                type: Input\n            }], language: [{\n                type: Input\n            }], reactive: [{\n                type: Input\n            }] } });\n\nclass NgxSimpleCountdownModule {\n}\nNgxSimpleCountdownModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nNgxSimpleCountdownModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownModule, declarations: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective], exports: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective] });\nNgxSimpleCountdownModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownModule, imports: [[]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.9\", ngImport: i0, type: NgxSimpleCountdownModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective],\n                    imports: [],\n                    exports: [NgxSimpleCountdownDirective, NgxSimpleTimeagoDirective]\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-simple-countdown\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NgxSimpleCountdownDirective, NgxSimpleCountdownModule, NgxSimpleTimeagoDirective };\n"]},"metadata":{},"sourceType":"module"}